<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <PropertyGroup>
        <IlcUseEnvironmentalTools>true</IlcUseEnvironmentalTools>
        <DisableUnsupportedError>true</DisableUnsupportedError>
    </PropertyGroup>

    <Target Name="SetPathToClang"
            BeforeTargets="SetupOSSpecificProps">
        <PropertyGroup>
            <CppLinker>"wine link"</CppLinker>
        </PropertyGroup>
    </Target>

    <Target Name="OverwriteTargetTriple"
            AfterTargets="SetupOSSpecificProps"
            BeforeTargets="LinkNative">
        <ItemGroup>
            <LinkerArg Include="@(LinkerArg->'%(Identity)')">
                <UpdatePath Condition="$([System.String]::Copy(%(Identity)).StartsWith($(IlcSdkPath))) == 'true'">Z:%(Identity)</UpdatePath>
                <RemovePath Condition="$([System.String]::Copy(%(Identity)).StartsWith($(IlcSdkPath))) == 'true'">%(Identity)</RemovePath>
            </LinkerArg>

            <LinkerArg Include="@(LinkerArg->'%(UpdatePath)')"/>
            <LinkerArg Remove="@(LinkerArg->'%(RemovePath)')"/>
        </ItemGroup>
    </Target>
</Project>
